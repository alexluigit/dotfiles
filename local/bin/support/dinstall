#!/bin/sh
REPODIR="$HOME/Dev/alex.files"
CONFIG_DIR="$REPODIR/config"
DATA_DIR="$REPODIR/local/share"
CONFIG_TARGET="$HOME/.config"
DATA_TARGET="$HOME/.local/share"

checkdir() {
  echo "Current    Directory: $PWD"
  echo "Repository Directory: $REPODIR"
  [[ ! -d $CONFIG_TARGET ]] && mkdir $CONFIG_TARGET || echo "$HOME/.config exists"
}

config() {
  for i in $(du -d 1 "$CONFIG_DIR" | cut -f2)
    do ln -sf "$i" "$CONFIG_TARGET"
  done
  rm $CONFIG_TARGET/config
  ln -sf $CONFIG_TARGET/ssh ~/.ssh && rm ~/.ssh/ssh 2>/dev/null
}

bin() {
  for i in $(find "$REPODIR/local/bin" -type f -executable)
    do ln -sf $i ~/.local/bin
  done
  ln -sf ~/.config/nvim/pack/bundle/opt/xvimux/xvimux $BIN_TARGET
  __apps
}

pacman() {
  sudo rm /etc/pacman.conf
  sudo ln -sf $CONFIG_DIR/pacman/pacman.conf /etc/pacman.conf
}

zshenv() {
  sudo ln -sf $CONFIG_DIR/zsh/system/zshenv /etc/zsh/zshenv
}

assets() {
  ln -sf $DATA_DIR/assets $DATA_TARGET
  ln -sf $DATA_DIR/fonts $DATA_TARGET
  for file in $(ls $DATA_DIR/icons); do
    ln -sf $DATA_DIR/icons/$file $DATA_TARGET/icons
  done
}

__apps() {
  ln -sf $CONFIG_DIR/rime $DATA_TARGET/fcitx5
  ln -sf $DATA_DIR/applications $DATA_TARGET
  ln -sf $CONFIG_DIR/mimeapps.list $CONFIG_TARGET/mimeapps.list
}

"$@"
# git submodule init && git submodule update && echo "Done."
